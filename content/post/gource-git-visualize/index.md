---
title: ทำ Git visualize ตลอด 1 ปีที่ผ่านมาด้วย Gource
author: nitpum
date: '2022-01-23T11:55:51.362Z'
lastmod: 2019-08-22T15:20:28.000Z
draft: true
tags: [blog, gource]
---

ปกติช่วงสิ้นปีหรือช่วงปีใหม่เราก็มักจะทำ Year review กันใช่ไหมละครับ  ผมเองก็อยากทำบ้างครับและก็อยากโชว์ด้วยว่าโปรเจคที่ทำอยู๋ 1 ปีที่ผ่านมาเกิดอะไรขึ้นบ้าง ถ้าเขียนบล็อกเฉยๆ มันก็จะธรรมดาไปหน่อย

Gource เป็นโปรแกรมที่จะอ่านประวัติใน git repo เรา แล้วเอามาทำเป็นกราฟแสดงให้ดูว่าในโปรเจคมีโฟลเดอร์และไฟล์อะไรบ้าง นอกจากนี้ยังไล่ไทมไลน์ให้ดูว่าช่วงนั้นมีอะไรเกิดขึ้นบ้างและใครทำอะไรตรงไหน

{{< video src="preview" >}}

## ติดตั้ง

วิธีติดตั้ง gource นั้นง่ายมากๆ เราสามารถลงผ่าน package maanger ด้วย command line เพียงบรรทัดเดียวได้เลยทั้ง macOS และ Linux รวมถึง Windows 11 หรือ Windows 10 ที่ลง winget ไว้แล้ว ก็สามารถใช้ command ติดตั้งตามด้านล่างได้เลยครับ

**Winget** (Windows 11 / Windows 10)
```cmd
winget install gource
```

**Homebrew** (macOS)
```bash
brew install gource
```

**Debian / Ubuntu**
```bash
sudo apt install gource
```

**Arch linux**
```bash
pacman -S gource
```

ถ้าใครไม่อยากลงผ่าน command line ก็สามารถโหลดตัวติดตั้งจากเว็บไซต์หลักได้เลย [gource.io](https://gource.io/)

## วิธีใช้งาน

ในส่วนวิธีใช้งานก็ง่ายๆ ไม่มีอะไรซับซ้อนเลยครับ เริ่มจากเราเปิดโฟลเดอร์โปรเจคของเราก่อน

```bash
cd ~/myporject
```

จากนั้นรัน gource 

```bash
gource
```

ตู้มม!! ก็จะมีหน้าต่างเด้งขึ้น พร้อมไล่ไทมไลน์ให้ดู

{{< video src="demo" >}}

แต่ไทม์ไลน์ที่ได้มันเริ่มตั้งแต่ตอนสร้าง repo มาจนถึงช่วงปัจจุบันเลย ซึ่งเราอยากได้แค่ช่วงของ 1 ปีที่แล้วเท่านั้น ตรงนี้เราสามารถกำหนดช่วงเวลาให้ gource ได้ตามข้างล่างนี้ครับ

```bash
gource --start-date "2021-01-01" --stop-date "2021-12-31"
```

โดยที่
- `---start-date "YYYY-MM-DD"` กำหนดวันเริ่มต้น ในที่นี้คือ วันที่ 1 มกราคม ค.ศ. 2021
- `--stop-date "YYYY-MM-DD"`  กำหนดวันสุดท้าย ในที่นี้คือ วันที่ 31 ธันวาคม ค.ศ. 2021

เท่านี้ gource จะไล่ไทมไลน์ให้เราแค่ในช่วงที่เรากำหนดไว้แล้วละครับ

แต่ว่าถ้าช่วงไหนไม่ได้มี commit เลย gource ก็จะข้ามช่วงนั้นไปให้อัตโนมัติครับ ถ้าใครไม่อยากให้ข้ามสามารถปิดด้วย flag `--disable-auto-skip` 

```bash
gource --disable-auto-skip
```

แล้วถ้ารู้สึกว่ามันช้าไปเราสามารถปรับความเร็วได้ด้วย `--time-scale <scale>` ซึ่งปรับได้ตั้งแต่ 1.0 - 4.0  (ค่าเริ่มต้นอยู่ที่ 1.0)
```bash
gource --time-scale 4
```

หน้าจอเล็กไปก็ปรับได้ด้วย `-<WIDTH>x<HIEGHT>`
```bash
gource -1280x720
```

พอรวมทุกอย่างเข้าด้วยกันก็จะได้คำสั่งประมาณนี้ครับ (จริงๆ ยังมี option ให้ปรับได้อีกเยอะ แนะนำให้ลอง[อ่านเพิ่มในวิกิ](https://github.com/acaudwell/Gource/wiki))

```bash
gource --start-date "2021-01-01" --stop-date "2021-12-31" --disable-auto-skip --time-scale 4 -1280x720 
```

เอาคำสั่งนี้ไปรัน เท่านี้เราก็มีไทม์ไลน์ไล่ให้ดูละครับว่าคลอดหนึ่งปีที่ผ่านมาแล้วครับ ที่เหลือก็แค่อัดหน้าจอเราก็จะได้ visualize ตลอด 1 ปีที่ผ่านมาแล้วครับ


## โบนัส

ใครที่ลง [ffmpeg](https://www.ffmpeg.org/) ไว้แล้ว
เราสามารถเอามาเรนเดอร์ไฟล์วิดีโอออกมาให้เราได้เลย จะได้ไม่ต้องมาอัดหน้าจอเอง

```bash
gource --start-date "2021-01-01" --stop-date "2021-12-31" --disable-auto-skip --time-scale 4 -1280x720 | ffmpeg -y -r 60 -f image2pipe -vcodec ppm -i - -vcodec libx264 -preset ultrafast -pix_fmt yuv420p -crf 1 -threads 0 -bf 0 gource.mp4
```
อ่านรายละเอียดเพิ่มเติมได้จาก [วิกิ gource](https://github.com/acaudwell/Gource/wiki/Videos)